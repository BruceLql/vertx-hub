<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello CommonJS!</title>
</head>
<body>
<div id="log"></div>

<script src="/hub/webroot/sockjs.js"></script>
<script src="/hub/webroot/vertx-eventbus.js"></script>
<script src="/hub/webroot/hub.js"></script>
<script>
// 测试TOKEN 请使用 test目录下的 BuildTestToken
// 第三方安装方法参考：https://github.com/sililau/jwt-rsa
var token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJtb2JpbGUiOiIxODMwNjc5OTM2OSIsImlzcCI6IkNNQ0MiLCJ1c2VySWQiOiIxMjM0MTIzNDEyIiwiY2FsbEJhY2siOiJodHRwOi8vd3d3LmJhaWR1LmNvbSIsIm5hbWUiOiLmtYvor5VuYW1lIiwiY2lkIjoiMTIzNDEyMzQxMjM0MjEiLCJub3RpZnlVcmwiOiJodHRwOi8vYXBwbGUuY24iLCJub25jZSI6MTIzNDEyMzQxMjM0LCJpYXQiOjE1ODk3ODc1MzF9.9vqUW17V9SrLOAG4QzpAYWRxIClv_Fe4rweQDeaUBhc";
var hub = new Hub('http://127.0.0.1:8088/socket?token=' + token);
hub.message = function(err, message) {
  console.log(err);
  console.log(message)
};
hub.start(15000208771, 'CMCC').
then(function (value) {
  console.log(value)

}).catch(function (reason) {
  console.log(reason)

})

// hub.send('FOF.DAQ.HUB.SERVER.SOCKET.PROXY',{"msg":"1"}).then(function (value) {
//   console.log(value)
// }).catch(function (reason) {
//   console.log(reason)
// })
</script>

</body>
</html>
